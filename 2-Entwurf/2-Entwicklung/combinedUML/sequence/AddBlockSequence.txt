@startuml

collections GUI
participant ButtonAction
participant BlockAction
participant CommandManager
participant AddBlockToConfigCommand
participant IModelInformation
collections Model

activate GUI

== Add Block ==

GUI -> BlockAction
activate BlockAction
'
' GUI Start
'
BlockAction --> AddBlockToConfigCommand : <<create>> cmd = AddBlockToConfigCommand(id)
activate AddBlockToConfigCommand
BlockAction -> CommandManager : runCommand(cmd)
activate CommandManager
CommandManager -> AddBlockToConfigCommand : cmd.execute()
AddBlockToConfigCommand -> IModelInformation : addBuildingBlock(id)
activate IModelInformation
IModelInformation -> Model
activate Model
'
' Model
'
IModelInformation <-- Model
deactivate Model
AddBlockToConfigCommand <-- IModelInformation
deactivate IModelInformation
CommandManager <-- AddBlockToConfigCommand
CommandManager -> AddBlockToConfigCommand : isUndoable()
activate CommandManager
CommandManager <-- AddBlockToConfigCommand : true
deactivate AddBlockToConfigCommand
CommandManager -> CommandManager : doneCommands.push(cmd)
deactivate CommandManager
BlockAction <-- CommandManager
deactivate CommandManager
'
' GUI End
'
GUI <-- BlockAction
deactivate BlockAction

== Undo ==

GUI -> ButtonAction
activate ButtonAction
'
' GUI Start
'
ButtonAction -> CommandManager : undo()
activate CommandManager
CommandManager -> CommandManager : cmd = doneCommands.pop()
CommandManager -> AddBlockToConfigCommand : cmd.unExecute()
activate AddBlockToConfigCommand
AddBlockToConfigCommand -> IModelInformation : removeBuildingBlock(id)
activate IModelInformation
IModelInformation -> Model
activate Model
'
' Model
'
IModelInformation <-- Model
deactivate Model
AddBlockToConfigCommand <-- IModelInformation
deactivate IModelInformation
CommandManager <-- AddBlockToConfigCommand
deactivate AddBlockToConfigCommand
CommandManager -> CommandManager : undoneCommands.push(cmd)
ButtonAction <-- CommandManager
deactivate CommandManager
'
' GUI End
'
GUI <-- ButtonAction
deactivate ButtonAction

== Redo ==

GUI -> ButtonAction
activate ButtonAction
'
' GUI Start
'
ButtonAction -> CommandManager : redo()
activate CommandManager
CommandManager -> CommandManager : cmd = undoneCommands.pop()
CommandManager -> AddBlockToConfigCommand : cmd.execute()
activate AddBlockToConfigCommand
AddBlockToConfigCommand -> IModelInformation : addBuildingBlock(id)
activate IModelInformation
IModelInformation -> Model
activate Model
'
' Model
'
IModelInformation <-- Model
deactivate Model
AddBlockToConfigCommand <-- IModelInformation
deactivate IModelInformation
CommandManager <-- AddBlockToConfigCommand
deactivate AddBlockToConfigCommand
CommandManager -> CommandManager : doneCommands.push(cmd)
ButtonAction <-- CommandManager
deactivate CommandManager
'
' GUI End
'
GUI <-- ButtonAction
deactivate ButtonAction

deactivate GUI

@enduml